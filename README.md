# xMemMod - Memory Module Library

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Platform](https://img.shields.io/badge/Platform-Windows-blue.svg)](https://www.microsoft.com/windows)
[![Architecture](https://img.shields.io/badge/Architecture-x86%20%7C%20x64-green.svg)](https://en.wikipedia.org/wiki/X86-64)

**xMemMod** - —ç—Ç–æ –º–æ—â–Ω–∞—è C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ DLL (Dynamic Link Libraries) –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ –ø–∞–º—è—Ç–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ x86, —Ç–∞–∫ –∏ x64 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å –≥–æ—Ç–æ–≤—ã–º–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üöÄ **–ó–∞–≥—Ä—É–∑–∫–∞ DLL –∏–∑ –ø–∞–º—è—Ç–∏** - –±–µ–∑ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫
- üéØ **–ì–æ—Ç–æ–≤—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏** - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- üîç **–ü–æ–ª–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- üèóÔ∏è **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä** - x86 –∏ x64
- üîß **C-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–ª–æ–∫–∞—Ü–∏–π –∏ –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```cpp
#include "xMemMod.h"

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
MemoryModule::MemoryModule module;

// –ó–∞–≥—Ä—É–∑–∫–∞ DLL –∏–∑ –ø–∞–º—è—Ç–∏
if (module.LoadFromMemory(dll_data, dll_size)) {
    // DLL —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤

```cpp
// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
auto exports = module.GetExportList();

for (const auto& exp : exports) {
    std::cout << "Function: " << exp.name 
              << " (Ordinal: " << exp.ordinal 
              << ", Address: 0x" << std::hex << exp.address << ")" << std::endl;
}
```

### –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

```cpp
// –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
FARPROC func = module.GetProcAddress("MyFunction");

// –ü–æ–∏—Å–∫ –ø–æ –æ—Ä–¥–∏–Ω–∞–ª—É
FARPROC func = module.GetProcAddressByOrdinal(1);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –æ—Ä–¥–∏–Ω–∞–ª—É
std::string name = module.GetFunctionName(1);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ä–¥–∏–Ω–∞–ª–∞ –ø–æ –∏–º–µ–Ω–∏
uint16_t ordinal = module.GetFunctionOrdinal("MyFunction");
```

## üìã API Reference

### MemoryModule Class

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `LoadFromMemory(const void* data, size_t size)` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç DLL –∏–∑ –±–∞–π—Ç–æ–≤–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ |
| `GetProcAddress(const char* name)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ –∏–º–µ–Ω–∏ |
| `GetExportList()` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤ |
| `Unload()` | –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å |
| `Is64Bit()` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è |

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `GetProcAddressByOrdinal(uint16_t ordinal)` | –ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –æ—Ä–¥–∏–Ω–∞–ª—É |
| `GetFunctionName(uint16_t ordinal)` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –æ—Ä–¥–∏–Ω–∞–ª—É |
| `GetFunctionOrdinal(const char* name)` | –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ä–¥–∏–Ω–∞–ª–∞ –ø–æ –∏–º–µ–Ω–∏ |
| `GetExportCount()` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π |
| `GetModuleName()` | –ò–º—è –º–æ–¥—É–ª—è |
| `GetBaseAddress()` | –ë–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è |
| `GetImageSize()` | –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –≤ –ø–∞–º—è—Ç–∏ |

### ExportInfo Structure

```cpp
struct ExportInfo {
    uint32_t ordinal;        // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
    uint32_t rva;           // RVA (Relative Virtual Address)
    uint16_t ordinal_base;  // –ë–∞–∑–∞ –æ—Ä–¥–∏–Ω–∞–ª–æ–≤
    uint32_t va;            // Virtual Address
    std::string name;       // –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏
    FARPROC address;        // –ì–û–¢–û–í–´–ô —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
};
```

## üîß C-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è C-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```c
// –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è
MemoryModule* module = memory_module_create();

// –ó–∞–≥—Ä—É–∑–∫–∞ DLL
bool success = memory_module_load_from_memory(module, data, size);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
FARPROC func = memory_module_get_proc_address(module, "MyFunction");

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
ExportInfo* exports;
size_t count;
memory_module_get_export_list(module, &exports, &count);

// –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ
memory_module_destroy(module);
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
xMemMod/
‚îú‚îÄ‚îÄ xMemMod.h          # –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ xMemMod.cpp        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îú‚îÄ‚îÄ example.cpp        # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä
‚îú‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ LICENSE            # –õ–∏—Ü–µ–Ω–∑–∏—è MIT
```

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Windows 7/8/10/11
- **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä**: MSVC 2019+, Clang, GCC
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: x86, x64
- **C++**: C++17 –∏–ª–∏ –≤—ã—à–µ

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `xMemMod.h` –∏ `xMemMod.cpp` –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª: `#include "xMemMod.h"`
3. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ `xMemMod.cpp` –≤–º–µ—Å—Ç–µ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ WinDivert DLL

```cpp
#include "xMemMod.h"
#include <iostream>

int main() {
    MemoryModule::MemoryModule module;
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ WinDivert DLL –∏–∑ –ø–∞–º—è—Ç–∏
    if (module.LoadFromMemory(WinDivertDll, WinDivertDllSize)) {
        std::cout << "DLL –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!" << std::endl;
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ WinDivertOpen
        auto WinDivertOpen = module.GetProcAddress("WinDivertOpen");
        if (WinDivertOpen) {
            std::cout << "WinDivertOpen –Ω–∞–π–¥–µ–Ω: 0x" 
                      << std::hex << WinDivertOpen << std::endl;
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
        auto exports = module.GetExportList();
        std::cout << "–ù–∞–π–¥–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π: " << exports.size() << std::endl;
    }
    
    return 0;
}
```

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç–µ–≤—ã–º –¥—Ä–∞–π–≤–µ—Ä–æ–º

```cpp
class NetworkDriver {
private:
    MemoryModule::MemoryModule module_;
    
public:
    bool LoadDriver(const void* dll_data, size_t size) {
        return module_.LoadFromMemory(dll_data, size);
    }
    
    bool OpenHandle() {
        auto WinDivertOpen = module_.GetProcAddress("WinDivertOpen");
        if (!WinDivertOpen) return false;
        
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
        // HANDLE handle = WinDivertOpen(filter, layer, priority, flags);
        return true;
    }
};
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–ª–æ–∫–∞—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è PE-—Å—Ç—Ä—É–∫—Ç—É—Ä
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

- –°–æ–∑–¥–∞–π—Ç–µ [Issue](https://github.com/Platon7788/xMemMod/issues)
- –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

## üèÜ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ PE-—Ñ–∞–π–ª–∞–º–∏
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π API
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ API reference

---

**xMemMod** - –¥–µ–ª–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É DLL –∏–∑ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Å—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π! üöÄ
